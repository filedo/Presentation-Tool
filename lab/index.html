<!doctype html>
<html lang="ja">
<head>
	<title>参加型プレゼンツール</title>
	<meta charset="utf-8">
	<script src="lib/jquery-1.11.1.min.js"></script>
	<script src="lib/jquery-ui.min.js"></script>
	<script src="js/slideChange.js"></script>
	<script src="js/slideFileSelect.js"></script>
	<script src="js/sort.js"></script>
	<script src="js/questionTool.js"></script>
	<script src="js/commentTool.js"></script>
	<link rel="stylesheet" type="text/css" href="css/slide.css">
	<link rel="stylesheet" type="text/css" href="lib/jquery-ui.min.css">
	<style>
	body{
		font: 62.5% "Trebuchet MS", sans-serif;
		margin: 50px;
	}
	#icons {
		margin: 0;
		padding: 0;
	}
	#icons li {
		margin: 2px;
		position: relative;
		padding: 4px 0;
		cursor: pointer;
		float: left;
		list-style: none;
	}
	#icons span.ui-icon {
		float: left;
		margin: 0 4px;
	}
	.fakewindowcontain .ui-widget-overlay {
		position: absolute;
	}
	select {
		width: 200px;
	}
	#toolmenu {
		width: 90px;
	}
	#questions {
		font: 200% "Trebuchet MS", sans-serif;
		letter-spacing: 2em;
	}
	#comments {
		font: 150% "Trebuchet MS", sans-serif;
	}
	#questionDialog {
		font: 150% "Trebuchet MS", sans-serif;
	}
	</style>
</head>
<body>
	<!-- メニュー -->
	<p>
		<input type="file" id="files" multiple> <input type="button" id="sort" value="スライドをソート">
	</p>
	<div id="toolmenu">
		<div>
			<button id="addTool">機能追加</button>
		</div>
		<ul>
			<li><a href="" id="questionTool">アンケート</a></li>
			<li><a href="" id="commentTool">感想</a></li>
		</ul>
	</div>
	<!-- アンケート機能追加時のダイアログ -->
	<div id="questionDialog" title="アンケート機能の追加">
		<input id="spinner">
		<p>選択肢の数を入力して下さい。</p>
	</div>

	<!-- スライド -->
	<figure id="slide"></figure>
	<div id="droparea"></div>

	<!-- アンケート -->
	<form style="margin-top: 1em;">
		<div id="questions"></div>
	</form>

	<!-- 感想 -->
	<form>
		<div id="comments"></div>
	</form>

	<!-- スクリプト -->
	<script>
	$('input[type="button"]').button();
	$('input[type="file"]').button();
	//$('input.only').button();

	$( "#spinner" ).spinner({
		max:9,
		min:1
	});

	//機能追加ボタンを押した時にメニューをプルダウンする関数
	$( function() {
		$( "#addTool" ).button( {
			text: true,
			icons: {
				primary: "ui-icon-triangle-1-s"
			}
		} )
		.click( function() {
			var menu = $( this ).parent().next().show().position( {
				my: "left top",
				at: "left bottom",
				of: this
			} );
			$( document ).one( "click", function() {
				menu.hide();
			} );
			return false;
		} ).parent().buttonset().next().hide().menu();
	} );

	// アンケート機能の総作成数
	// 最低でも1つ作成されるので初期値は1
	var qToolNum = 1;
	// ダイアログ
	$( "#questionDialog" ).dialog({
		autoOpen: false,
		width: 300,
		modal: true,
		buttons: [
		{
			text: "Ok",
			click: function() {
				questionTool();
				$( this ).dialog( "close" );
			}
		},
		{
			text: "Cancel",
			click: function() {
				$( this ).dialog( "close" );
			}
		}
		]
	});

	// スライドのファイルを選択すると実行される
	// document.getElementById('files').addEventListener('change', slideFileSelect, false);と同様
	$('#files').on('change',slideFileSelect);
	$('#sort').click(sort);
	// 機能追加のメニューでアンケートボタンを押した時、ダイアログを表示する
	$('#questionTool').click(function(evt){
		$('#questionDialog').dialog("open");
		evt.preventDefault();
	});
	$('#commentTool').click(commentTool);

	</script>
</body>
</html>