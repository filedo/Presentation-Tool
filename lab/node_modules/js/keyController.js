// 利用可能なキーイベントをまとめた関数
// case 39,37はスライドを移動させるためのキー
// case 68は選択されたフォーム（アンケートフォームや感想フォーム）を削除するためのキー
// $function()はjqueryのAPIを使える

// 要素のidと選択されたか否かを記録する変数
// ある要素が選択された場合の例：["opinion-1",true]
var selectedId = ["id",false];
$(function(){
	// キーイベント処理
	$(window).keyup(function(e){
		switch(e.which){

			// →キー
			case 39:
			// スライドを次のページに進める（同期）
			if(presenter){
				// スライドが追加されていない時は移動できない
				if($('#slide').children().length != 0){
					socket.emit('nextpage_from_client');
				}
			}
			break;

			// ←キー
			case 37:
			// スライドを前のページに戻す（同期）
			if(presenter){
				// スライドが追加されていない時は移動できない
				if($('#slide').children().length != 0){
					socket.emit('prepage_from_client');
				}
			}
			break;

			// dキー
			case 68:
			// フォームが選択された状態でdを押すと、選択されたフォームが削除される
			if(presenter){
				if(selectedId[1]==true){
					removeForm(selectedId);
				}
			}
			break;

			// Enterキー
			case 13:
			// フォームが選択された状態でEnterを押すと、現在のスライドに選択されたフォームが設定される
			if(presenter){
				// スライドが追加されていない時はセットできない
				if(selectedId[1]==true && $('#slide').children().length != 0){
					setForm(selectedId);
					alert("選択中のフォームを現在のスライドにセットしました。");
				}
			}
			break;
		}
	});
});
